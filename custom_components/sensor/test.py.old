import aiohttp
import asyncio
import async_timeout
import json
import logging
from typing import Dict

async def get_data() -> Dict[str, str]:
    session = aiohttp.ClientSession()
    api_url = "https://webapp.ftiab.se/Code/Ajax/StationHandler.aspx/GetStationMaintenance"
    #payload = '{"stationId": "10421"}'
    payload = '{"stationId": "'+ "10421" + '"}'
    headers = {'Content-Type': 'application/json'}
    data_json: Dict[str, str] = {}

    async with session.post(api_url, data=payload, headers=headers) as response:
        #  if response.status != 200:
        #     # Do some logging
        #     return
        data = await response.text()
        response_json= json.loads(data)
        data_json = json.loads(response_json["d"])
        # for key, value in data_json.items():
        #     logging.info("{}: {}".format(key, value))
    await session.close()
    return data_json
asyncio.run(get_data())