say: '{{say}}'

who: >
  {% if tell == 'th' %} notify.th
  {% elif tell == 'eh' %} notify.eh
  {% elif tell == 'mh' %} notify.mh
  {% elif tell == 'sh' %} notify.sh
  {% else %} {{tell}} {% endif %}

media_player: >
  {% if now().hour < 7 and now().hour > 20 %} media_player.sovrum
  {% else %} media_player.sovrum {% endif %}

title: >
  {% if title is defined %}
    {{title}}
  {% else %}
    "Message from homeassistant"
  {% endif %}

message: >
  {%- macro greeting() -%}
    {% if now().strftime('%H')|int < 12 and now().strftime('%H')|int > 6 %}
      {% set greeting = ["Hej, " , "God morgon, " , "Hallå! "] %}
    {% elif now().strftime('%H')|int >= 12 and now().strftime('%H')|int < 17 %}
      {% set greeting = ["Hejsan! " , "God eftermiddag, " , "Hej där, "] %}
    {% else %}
      {% set greeting = ["Hej, " , "God kväll, " , "Hallå! "] %}
    {% endif %}
    {{ greeting|random }}
  {%- endmacro -%}

  {%- macro inform() -%}
    {{ ["Jag vill bara informera att ", "Det är så att ",
      "Du ville att jag ska informera att ", "För din information så "]|random }}
  {%- endmacro -%}

  {# ************************************* #}
  {#  ******** Build the message ********  #}
  {# ************************************* #}

  {{ [greeting(), inform()] | random }}

  {% if message is defined %}
    {{message}} 
  {% endif %}  
  