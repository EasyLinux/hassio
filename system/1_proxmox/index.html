



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Tomas Hellström, @helto4real">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.3.0">
    
    
      
        <title>1. Setup the system - proxmox</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.572ca0f0.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.962652e9.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133997912-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-133997912-1")</script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#setup-the-system" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="My Home Assistant docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                My Home Assistant docs
              </span>
              <span class="md-header-nav__topic">
                1. Setup the system - proxmox
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/helto4real/hassio/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="My Home Assistant docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    My Home Assistant docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/helto4real/hassio/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../gear/" title="My gear" class="md-nav__link">
      My gear
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/bluetooth/" title="Bluetooth tracker" class="md-nav__link">
      Bluetooth tracker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/deconz/" title="Deconz" class="md-nav__link">
      Deconz
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker/nginx/" title="nginx and lets encrypt" class="md-nav__link">
      nginx and lets encrypt
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      System
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        System
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        1. Setup the system - proxmox
      </label>
    
    <a href="./" title="1. Setup the system - proxmox" class="md-nav__link md-nav__link--active">
      1. Setup the system - proxmox
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hardware" title="Hardware" class="md-nav__link">
    Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prepare-install" title="Prepare install" class="md-nav__link">
    Prepare install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install" title="Install" class="md-nav__link">
    Install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-before-creating-first-vm" title="Configure before creating first VM" class="md-nav__link">
    Configure before creating first VM
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-no-subscription-repository" title="Add the No-Subscription Repository" class="md-nav__link">
    Add the No-Subscription Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network" title="Network" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificates" title="Certificates" class="md-nav__link">
    Certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-vm-for-hassio" title="Add VM for Hassio" class="md-nav__link">
    Add VM for Hassio
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upload-the-iso" title="Upload the ISO" class="md-nav__link">
    Upload the ISO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-the-vm" title="Add the VM" class="md-nav__link">
    Add the VM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-debian" title="Setup Debian" class="md-nav__link">
    Setup Debian
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-sudo" title="Install sudo" class="md-nav__link">
    Install sudo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-configuration" title="IP configuration" class="md-nav__link">
    IP configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finalizing-the-setup" title="Finalizing the setup" class="md-nav__link">
    Finalizing the setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2_hassio/" title="2. Setup the system - Hassio" class="md-nav__link">
      2. Setup the system - Hassio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3_move_old_hassio/" title="3. Move old settings to new" class="md-nav__link">
      3. Move old settings to new
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4_hassop/" title="3.1 Alternative hassos install" class="md-nav__link">
      3.1 Alternative hassos install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5_opnsense_firewall/" title="4 Firewall setup with guest network VLAN" class="md-nav__link">
      4 Firewall setup with guest network VLAN
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hardware" title="Hardware" class="md-nav__link">
    Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prepare-install" title="Prepare install" class="md-nav__link">
    Prepare install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install" title="Install" class="md-nav__link">
    Install
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-before-creating-first-vm" title="Configure before creating first VM" class="md-nav__link">
    Configure before creating first VM
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-no-subscription-repository" title="Add the No-Subscription Repository" class="md-nav__link">
    Add the No-Subscription Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network" title="Network" class="md-nav__link">
    Network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificates" title="Certificates" class="md-nav__link">
    Certificates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-vm-for-hassio" title="Add VM for Hassio" class="md-nav__link">
    Add VM for Hassio
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upload-the-iso" title="Upload the ISO" class="md-nav__link">
    Upload the ISO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-the-vm" title="Add the VM" class="md-nav__link">
    Add the VM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-debian" title="Setup Debian" class="md-nav__link">
    Setup Debian
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-sudo" title="Install sudo" class="md-nav__link">
    Install sudo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-configuration" title="IP configuration" class="md-nav__link">
    IP configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finalizing-the-setup" title="Finalizing the setup" class="md-nav__link">
    Finalizing the setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/helto4real/hassio/edit/master/docs/system/1_proxmox.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="setup-the-system">Setup the system</h1>
<p>I use an Intel NUC as my device setting upp the system.</p>
<h2 id="hardware">Hardware</h2>
<ul>
<li>Intel NUC with at least 8 Gig memory plus VM mem size, I use 32 Gig but 16 would be enough</li>
<li>Make sure you have enough harddrive space. I use 256 gig SSD.</li>
<li>Bios boot and hit F2 (NUC) to enter. Look for boot order and boot devices. Make sure USB boot is prio. Make sure you enabled virtualization features of the processor. </li>
</ul>
<h2 id="prepare-install">Prepare install</h2>
<ul>
<li>Download the proxmox image at <a href="https://www.proxmox.com/en/downloads/category/iso-images-pve">this site</a></li>
<li>Get a USB stick with at least 1 gig memory </li>
<li>Prepare the stick, I used <a href="https://rufus.ie/">rufus download</a></li>
<li>Use the settings like below, specifically I used the DD mode (not ISO) to make the usb boot.</li>
</ul>
<p><img alt="rufus" src="../img/proxmox/rufus_settings_1.jpg" /></p>
<p>Set the DD setting (Pardon the Swedish) and press OK.
<img alt="rufus" src="../img/proxmox/rufus_settings_2.jpg" /></p>
<h2 id="install">Install</h2>
<ul>
<li>Put the usb in the NUC and reboot. Make sure you made hardware and bios correctly</li>
<li>Set the admin/root password (DONT LOSE IT!)</li>
<li>Choose harddrive where you install proxmox on</li>
<li>Select correct country, keyboard layout and time-zone</li>
<li>Install and reboot after install is done</li>
<li>Test install by login to proxmox web interface wich are https://yourip:8006. Login with root/yourpassword</li>
</ul>
<h2 id="configure-before-creating-first-vm">Configure before creating first VM</h2>
<h3 id="add-the-no-subscription-repository">Add the No-Subscription Repository</h3>
<p>In order to get new images you need a repository. Give you have no subscription we have to add the correct repository. Add the pev-no-sybscription between the main contrib and security updates in the file:</p>
<p><code>/etc/apt/sources.list</code></p>
<pre><code>deb http://ftp.debian.org/debian stretch main contrib

# PVE pve-no-subscription repository provided by proxmox.com,
# NOT recommended for production use
deb http://download.proxmox.com/debian/pve stretch pve-no-subscription

# security updates
deb http://security.debian.org stretch/updates main contrib
</code></pre>

<h3 id="network">Network</h3>
<p>For home users the default bridged network makes most sense so not extra network is configured. Multiple bridges can be created. For improved security, vlans can be setup. I might do this in a test environmet but will not use VLAN for now.</p>
<h3 id="certificates">Certificates</h3>
<p>I will use lets encrypt for certificate management. 
Todo: document this</p>
<h2 id="add-vm-for-hassio">Add VM for Hassio</h2>
<p>Creating the virtual machine. Default values apply if not specified in the instructions or on image.</p>
<h3 id="upload-the-iso">Upload the ISO</h3>
<p>Download debian or what ever operating system you prefere. I use net install image of Debian 9. <a href="https://www.debian.org/CD/netinst/">download here</a>. Select amd64 CD or torrent if you prefer.</p>
<p><img alt="upload" src="../img/proxmox/upload_iso.jpg" /></p>
<p>Then select your ISO file and press <code>Upload</code></p>
<p><img alt="upload" src="../img/proxmox/upload_iso_debian.jpg" /></p>
<h3 id="add-the-vm">Add the VM</h3>
<p><strong>General</strong>
- Name: HASSIO
- No resource pool</p>
<p><img alt="general" src="../img/proxmox/1-create-vm-general.jpg" /></p>
<p><strong>OS</strong>
- select your isofile and use rest default</p>
<p><img alt="general" src="../img/proxmox/create-vm-deb.jpg" /></p>
<p><strong>Hard disk</strong>
I used 20 Gig as start disk, remember that the whole disk wont be allocated at once. This is the max size.</p>
<p><strong>CPU</strong>
- 1 socket, 2 cores should be sufficent (I have 4 cores total)</p>
<p><strong>Memory</strong>
- 2368 MiB should be sufficient for HASSIO and docker containers</p>
<p><strong>Network</strong></p>
<p>Default settings</p>
<p>Create the VM by select the start the installation after created checkbox and press "Finish"</p>
<h3 id="setup-debian">Setup Debian</h3>
<h4 id="installation">Installation</h4>
<p>For other operating systems please see other.
- double click on new host to get to screen
- Install Debian with default settings. I used swedish as language and sweden as location 
- Choose host name, I use hassio
- Set the root password
- Set the non root name and username 
- Use whole disk and standard settings for partitioning
- Use standard settings util you are at the software selection
- Unselect debian environment and print server
- Select "SSH" server, I am sure you want to connect remote to the machine
- Install rest as default and reboot</p>
<p>Screens from setup. (Sorry for Swedish):</p>
<p><img alt="general" src="../img/proxmox/debian_start.jpg" />
<img alt="general" src="../img/proxmox/debian_language.jpg" />
<img alt="general" src="../img/proxmox/debian_host.jpg" />
<img alt="general" src="../img/proxmox/debian_software.jpg" /></p>
<h4 id="install-sudo">Install sudo</h4>
<p>Depending on your configuration you might need to install sudo.</p>
<p>Enter su using <code>$ su</code> and enter password.
Install sudo and add your user (the one you provided in installtime) and exit from su.</p>
<pre><code>$ apt-get install sudo
$ adduser username sudo
$ usermod -aG sudo youruser
$ exit
</code></pre>

<p>and the exit. 
Now you can use sudo for admin. </p>
<p>if you get problems you might need to add the user in the sudoers file.</p>
<pre><code>$ su
$ nano /etc/sudoers
$ exit
</code></pre>

<p>put the <code>youruser   ALL=(ALL:ALL) ALL</code> after root</p>
<h4 id="ip-configuration">IP configuration</h4>
<p>If you want the default DHCP IP just skip this step</p>
<pre><code># Log in as root or su to root then
nano /etc/network/interfaces
# Should look like this:
source /etc/network/interfaces.d/*
# The loopback network interface
auto lo
iface lo inet loopback
# The primary network interface
allow-hotplug eth0
iface eth0 inet dhcp
</code></pre>

<p>then change to :</p>
<pre><code># The primary network interface
allow-hotplug eth0
iface eth0 inet static
        address 192.168.1.202
        netmask 255.255.255.0
        gateway 192.0.1.1
</code></pre>

<p>Make sure your settings are correct. In an VM the eth0 is probable something else. To list network interfaces write <code>ip link show</code> to get the correct one. You need to select the ethernet interface.</p>
<h4 id="finalizing-the-setup">Finalizing the setup</h4>
<p>Now it is a good time to make a snapshot. A snapshot is a point in time to restart from. 
- First make sure the latest updates and uppgrades are on the base operating syste before making snapshot.</p>
<pre><code>$ sudo apt-get update
$ sudo apt-get upgrade
$ exit
</code></pre>

<p>go to the proxmox web interface and select your host ant then select "snapshot".
Create the snapshot. Call it "Fresh". Now we always can start fresh after installing hassio and all other stuff.</p>
<p>CONGRATULATIONS YOUR FIRST VM IS UP AND RUNNING!</p>
<h1 id="proxmox-backup">Proxmox backup</h1>
<p>One of the best features running virtual environments is the possibility to backup entire machine really easy. Here is docs about how that's done.</p>
<h2 id="use-usb-disk">Use usb disk</h2>
<h3 id="mount-the-usb-drive">Mount the USB drive</h3>
<p>If you are running a windows system, the drive is probably a NTFS drive. This guide assumes this but there are basically very few difference with other format types. </p>
<p>For full descriptions go to <a href="https://linuxconfig.org/howto-mount-usb-drive-in-linux">this url</a></p>
<ol>
<li><code>$ fdisk -l</code> lists your disks, make sure you can see your drive. Take not of drive path i.e. <code>/dev/?</code></li>
<li><code>$ mkdir /media/usb-drive</code> makes mount point</li>
<li><code>$ mount /dev/sdc1 /media/usb-drive/</code> (sdc1 will probably be another device id for you), check #1</li>
<li><code>$ mount | grep sdc1</code>, to check if mount went ok</li>
</ol>
<p>if you later want to unmount the usb, the command is <code>umount /media/usb-drive</code>. </p>
<p>Top PERMANENTLY MAKE MOUNT AVAILABLE ATT BOOT then do following. </p>
<ol>
<li><code>$ blkid -t TYPE=ntfs -sUUID</code> Check your unique id of drive. The type can be <code>vfat</code> if not windows formatted.</li>
<li>In the file <code>/etc/fstab</code> add the following <code>UUID=702432D524329DD2 /media/usb-drive ntfs defaults 0 0</code> REMEMBER TO USER YOUR OWN UUID and other type than ntfs if your drive is formatted non ntfs! </li>
</ol>
<p><strong>Please be VERY CAREFUL to make sure everything is correct. This is why you should try mount manually first</strong> </p>
<h3 id="add-drive-to-proxmox">Add drive to Proxmox</h3>
<ol>
<li>In datacenter view, select <code>Storage</code></li>
<li>Click, "Add-&gt;Directory" set your settings and Save</li>
</ol>
<p><img alt="directory" src="../img/proxmox/storage_create_directory.jpg" /></p>
<p>Now you can use the drive as target disk making backups in proxmox!.</p>
<h2 id="schedule-backups">Schedule backups</h2>
<ol>
<li>In datacenter view, select <code>Backup</code></li>
<li>Add a backupscheme and select your new backupdisk</li>
</ol>
<p><img alt="backup" src="../img/proxmox/add_backup.jpg" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../docker/nginx/" title="nginx and lets encrypt" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                nginx and lets encrypt
              </span>
            </div>
          </a>
        
        
          <a href="../2_hassio/" title="2. Setup the system - Hassio" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                2. Setup the system - Hassio
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a353778b.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>